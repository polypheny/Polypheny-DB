syntax = "proto3";

option java_multiple_files = true;
option java_package = "org.polypheny.db.protointerface.proto";
option java_outer_classname = "ProtoInterfaceProto";
option objc_class_prefix = "PI";

package polypheny.protointerface;

service ProtoInterface {
  // Connect to server by sending a ConnectionRequest.
  rpc connect(ConnectionRequest) returns (ConnectionReply) {}

  rpc executeSimpleSqlQuery(SimpleSqlQuery) returns (QueryResult) {}
}

// Sent by the client to request a connection to the server.
message ConnectionRequest {
  int32 majorApiVersion = 1;
  int32 minorApiVersion = 2;
  // UUID generated by the client. Enables the server to identify clients.
  string clientUUID = 3;
  map<string, string> connectionProperties = 4;
}

// Sent by the server as a response to a ConnectionRequest.
message ConnectionReply {
  bool isCompatible = 1;
  uint32 majorApiVersion = 2;
  uint32 minorApiVersion = 3;
}

message SimpleSqlQuery {
  string query = 1;
}

message QueryResult {
  oneof result {
    bool noResult = 1;
    Frame frame = 2;
    int32 count = 3;
    int64 bigCount = 4;
  }
}

message Frame {

}

message setProperty {
  string key = 1;
  string value = 2;
}
